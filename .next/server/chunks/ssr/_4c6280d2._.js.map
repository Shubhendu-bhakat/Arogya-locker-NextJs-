{"version":3,"sources":["turbopack:///[project]/styles/chat.module.css [app-ssr] (css module)","turbopack:///[project]/app/chat/chatClient.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"bot\": \"chat-module__uNFIjq__bot\",\n  \"chatBox\": \"chat-module__uNFIjq__chatBox\",\n  \"chatContainer\": \"chat-module__uNFIjq__chatContainer\",\n  \"chatWrapper\": \"chat-module__uNFIjq__chatWrapper\",\n  \"fadeIn\": \"chat-module__uNFIjq__fadeIn\",\n  \"hiddenInput\": \"chat-module__uNFIjq__hiddenInput\",\n  \"imageMessage\": \"chat-module__uNFIjq__imageMessage\",\n  \"inputArea\": \"chat-module__uNFIjq__inputArea\",\n  \"message\": \"chat-module__uNFIjq__message\",\n  \"sendBtn\": \"chat-module__uNFIjq__sendBtn\",\n  \"textInput\": \"chat-module__uNFIjq__textInput\",\n  \"uploadLabel\": \"chat-module__uNFIjq__uploadLabel\",\n  \"user\": \"chat-module__uNFIjq__user\",\n});\n","\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport styles from \"../../styles/chat.module.css\";\r\n\r\ninterface Message {\r\n  sender: \"user\" | \"bot\";\r\n  senderName: string;\r\n  text: string;\r\n  type: \"text\" | \"image\";\r\n  time: string;\r\n}\r\n\r\nexport default function ChatClient({ firstName }: { firstName: string }) {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [socket, setSocket] = useState<WebSocket | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\r\n  const chatEndRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    const ws = new WebSocket(\"ws://localhost:8080\"); // dummy backend\r\n    setSocket(ws);\r\n\r\n    ws.onmessage = (event) => {\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          sender: \"bot\",\r\n          senderName: \"ArogyaBot\",\r\n          text: event.data,\r\n          type: \"text\",\r\n          time: new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\r\n        },\r\n      ]);\r\n    };\r\n\r\n    return () => ws.close();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  const sendMessage = () => {\r\n    if (!input.trim()) return;\r\n\r\n    const now = new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\r\n\r\n    const userMessage: Message = {\r\n      sender: \"user\",\r\n      senderName: firstName,\r\n      text: input,\r\n      type: \"text\",\r\n      time: now,\r\n    };\r\n    setMessages((prev) => [...prev, userMessage]);\r\n\r\n    socket?.send(input);\r\n\r\n    setTimeout(() => {\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          sender: \"bot\",\r\n          senderName: \"ArogyaBot\",\r\n          text: \"This is a standard response ðŸ¤–\",\r\n          type: \"text\",\r\n          time: new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\r\n        },\r\n      ]);\r\n    }, 800);\r\n\r\n    setInput(\"\");\r\n  };\r\n\r\n  const sendImage = (file: File) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      const imageData = reader.result as string;\r\n      const now = new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\r\n\r\n      const userImage: Message = {\r\n        sender: \"user\",\r\n        senderName: firstName,\r\n        text: imageData,\r\n        type: \"image\",\r\n        time: now,\r\n      };\r\n      setMessages((prev) => [...prev, userImage]);\r\n\r\n      setTimeout(() => {\r\n        setMessages((prev) => [\r\n          ...prev,\r\n          {\r\n            sender: \"bot\",\r\n            senderName: \"ArogyaBot\",\r\n            text: \"âœ… Image received\",\r\n            type: \"text\",\r\n            time: new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\r\n          },\r\n        ]);\r\n      }, 800);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.chatWrapper}>\r\n      <div className={styles.chatContainer}>\r\n        {/* Messages */}\r\n        <div className={styles.chatBox}>\r\n          {messages.map((msg, i) => (\r\n            <div\r\n              key={i}\r\n              className={`${styles.messageWrapper} ${\r\n                msg.sender === \"user\" ? styles.userWrapper : styles.botWrapper\r\n              }`}\r\n            >\r\n              <span className={styles.senderName}>{msg.senderName}</span>\r\n              <div\r\n                className={`${styles.message} ${\r\n                  msg.sender === \"user\" ? styles.user : styles.bot\r\n                }`}\r\n              >\r\n                {msg.type === \"text\" ? (\r\n                  <p>{msg.text}</p>\r\n                ) : (\r\n                  <img\r\n                    src={msg.text}\r\n                    alt=\"Uploaded\"\r\n                    className={styles.imageMessage}\r\n                  />\r\n                )}\r\n              </div>\r\n              <span className={styles.timestamp}>{msg.time}</span>\r\n            </div>\r\n          ))}\r\n          <div ref={chatEndRef}></div>\r\n        </div>\r\n\r\n        {/* Input Area */}\r\n        <div className={styles.inputArea}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Type your message...\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyDown={(e) => e.key === \"Enter\" && sendMessage()}\r\n            className={styles.textInput}\r\n          />\r\n\r\n          <label htmlFor=\"file-upload\" className={styles.uploadLabel}>\r\n            ðŸ“· Upload\r\n          </label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            ref={fileInputRef}\r\n            onChange={(e) => e.target.files && sendImage(e.target.files[0])}\r\n            className={styles.hiddenInput}\r\n            id=\"file-upload\"\r\n          />\r\n\r\n          <button onClick={sendMessage} className={styles.sendBtn}>\r\n            Send\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}