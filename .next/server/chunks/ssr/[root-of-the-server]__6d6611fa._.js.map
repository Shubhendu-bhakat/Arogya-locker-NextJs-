{"version":3,"sources":["turbopack:///[project]/styles/profile.module.css [app-rsc] (css module)","turbopack:///[project]/app/profile/page.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"authCard\": \"profile-module__rzfzIq__authCard\",\n  \"authHeader\": \"profile-module__rzfzIq__authHeader\",\n  \"avatar\": \"profile-module__rzfzIq__avatar\",\n  \"avatarSection\": \"profile-module__rzfzIq__avatarSection\",\n  \"avatarSimple\": \"profile-module__rzfzIq__avatarSimple\",\n  \"btnPrimary\": \"profile-module__rzfzIq__btnPrimary\",\n  \"container\": \"profile-module__rzfzIq__container\",\n  \"docCard\": \"profile-module__rzfzIq__docCard\",\n  \"docCategory\": \"profile-module__rzfzIq__docCategory\",\n  \"docCategorySimple\": \"profile-module__rzfzIq__docCategorySimple\",\n  \"docHeader\": \"profile-module__rzfzIq__docHeader\",\n  \"docItemSimple\": \"profile-module__rzfzIq__docItemSimple\",\n  \"docLink\": \"profile-module__rzfzIq__docLink\",\n  \"docLinkSimple\": \"profile-module__rzfzIq__docLinkSimple\",\n  \"docName\": \"profile-module__rzfzIq__docName\",\n  \"docNameSimple\": \"profile-module__rzfzIq__docNameSimple\",\n  \"docsGrid\": \"profile-module__rzfzIq__docsGrid\",\n  \"docsListSimple\": \"profile-module__rzfzIq__docsListSimple\",\n  \"docsSectionSimple\": \"profile-module__rzfzIq__docsSectionSimple\",\n  \"docsTitleSimple\": \"profile-module__rzfzIq__docsTitleSimple\",\n  \"emptyDocs\": \"profile-module__rzfzIq__emptyDocs\",\n  \"emptyDocsSimple\": \"profile-module__rzfzIq__emptyDocsSimple\",\n  \"errorCard\": \"profile-module__rzfzIq__errorCard\",\n  \"infoGrid\": \"profile-module__rzfzIq__infoGrid\",\n  \"infoGridSimple\": \"profile-module__rzfzIq__infoGridSimple\",\n  \"infoItem\": \"profile-module__rzfzIq__infoItem\",\n  \"infoLabel\": \"profile-module__rzfzIq__infoLabel\",\n  \"infoLabelSimple\": \"profile-module__rzfzIq__infoLabelSimple\",\n  \"infoValue\": \"profile-module__rzfzIq__infoValue\",\n  \"lastUpdated\": \"profile-module__rzfzIq__lastUpdated\",\n  \"medicalBadge\": \"profile-module__rzfzIq__medicalBadge\",\n  \"medicalIcon\": \"profile-module__rzfzIq__medicalIcon\",\n  \"patientId\": \"profile-module__rzfzIq__patientId\",\n  \"patientIdSimple\": \"profile-module__rzfzIq__patientIdSimple\",\n  \"patientInfo\": \"profile-module__rzfzIq__patientInfo\",\n  \"patientName\": \"profile-module__rzfzIq__patientName\",\n  \"patientNameSimple\": \"profile-module__rzfzIq__patientNameSimple\",\n  \"profileCard\": \"profile-module__rzfzIq__profileCard\",\n  \"profileCardSimple\": \"profile-module__rzfzIq__profileCardSimple\",\n  \"profileContent\": \"profile-module__rzfzIq__profileContent\",\n  \"profileFooter\": \"profile-module__rzfzIq__profileFooter\",\n  \"profileHeader\": \"profile-module__rzfzIq__profileHeader\",\n  \"profileHeaderSimple\": \"profile-module__rzfzIq__profileHeaderSimple\",\n  \"sectionTitle\": \"profile-module__rzfzIq__sectionTitle\",\n});\n","import { getServerSession } from \"next-auth\"\r\nimport { authOptions } from \"../api/auth/[...nextauth]/route\"\r\nimport Link from \"next/link\"\r\nimport { prisma } from \"../lib/prisma\"\r\nimport styles from \"../../styles/profile.module.css\"\r\nimport axios from \"axios\";\r\n\r\nexport default async function ProfilePage() {\r\n  const session = await getServerSession(authOptions)\r\n  \r\n  if (!session) {\r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.authCard}>\r\n          <div className={styles.authHeader}>\r\n            <div className={styles.medicalIcon}>\r\n              <svg viewBox=\"0 0 24 24\" fill={styles.currentColor}>\r\n                <path d=\"M12 2C13.1 2 14 2.9 14 4V8H18C19.1 8 20 8.9 20 10V12C20 13.1 19.1 14 18 14H14V18C14 19.1 13.1 20 12 20H10C8.9 20 8 19.1 8 18V14H4C2.9 14 2 13.1 2 12V10C2 8.9 2.9 8 4 8H8V4C8 2.9 8.9 2 10 2H12Z\"/>\r\n              </svg>\r\n            </div>\r\n            <h2>Authentication Required</h2>\r\n            <p>Please sign in to access your medical profile</p>\r\n          </div>\r\n          <Link href=\"/signin\" className={styles.btnPrimary}>\r\n            Sign In to Continue\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  const username = session.user?.name ?? undefined;\r\n  const email = session.user?.email ?? undefined;\r\n  const user = await prisma.user.findUnique({\r\n    where: {\r\n     username: username,\r\n     email: email\r\n    },\r\n  })\r\n  \r\n  if (!user) {\r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.errorCard}>\r\n          <h1>Patient Record Not Found</h1>\r\n          <p>Unable to locate your medical profile in our system. Please contact support.</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  // Generate user avatar with first letter\r\n  const userInitial = (user.username || user.email || \"U\").charAt(0).toUpperCase()\r\n\r\n  // Fetch user documents directly from DB\r\n  const documents = await prisma.document.findMany({\r\n    where: { userId: user.id },\r\n    orderBy: { createdAt: \"desc\" },\r\n  });\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.profileCardSimple}>\r\n        <div className={styles.profileHeaderSimple}>\r\n          <div className={styles.avatarSimple}>{userInitial}</div>\r\n          <div>\r\n            <div className={styles.patientNameSimple}>{user.username}</div>\r\n            <div className={styles.patientIdSimple}>Patient ID: #{user.id}</div>\r\n          </div>\r\n        </div>\r\n        <div className={styles.infoGridSimple}>\r\n          <div>\r\n            <span className={styles.infoLabelSimple}>Email:</span> {user.email}\r\n          </div>\r\n          <div>\r\n            <span className={styles.infoLabelSimple}>Phone:</span> {user.phone || \"Not provided\"}\r\n          </div>\r\n          <div>\r\n            <span className={styles.infoLabelSimple}>Age:</span> {user.age ? `${user.age} years` : \"Not provided\"}\r\n          </div>\r\n          <div>\r\n            <span className={styles.infoLabelSimple}>Gender:</span> {user.sex || \"Not provided\"}\r\n          </div>\r\n        </div>\r\n        <div className={styles.docsSectionSimple}>\r\n          <div className={styles.docsTitleSimple}>Your Documents</div>\r\n          {documents.length === 0 ? (\r\n            <div className={styles.emptyDocsSimple}>No documents found.</div>\r\n          ) : (\r\n            <ul className={styles.docsListSimple}>\r\n              {documents.map((doc) => (\r\n                <li key={doc.id} className={styles.docItemSimple}>\r\n                  <span className={styles.docNameSimple}>{doc.name}</span>\r\n                  <span className={styles.docCategorySimple}>{doc.category}</span>\r\n                  <a href={doc.url || '#'} target=\"_blank\" rel=\"noopener noreferrer\" className={styles.docLinkSimple}>\r\n                    View\r\n                  </a>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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"}